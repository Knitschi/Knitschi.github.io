<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMakeProjectFramework: How to setup the CPFMachines infrastructure</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="CMakeProjectFramework"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../DoxygenStylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMakeProjectFramework
   </div>
   <div id="projectbrief">A CMake and Jenkins based C++ CI pipeline.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="../../search.html" method="get">
              <img id="MSearchSelect" src="../../search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('de/d15/_c_p_f_machines_usage.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">How to setup the <a class="el" href="../../db/d51/namespace_c_p_f_machines.html">CPFMachines</a> infrastructure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Requirements</h2>
<ul>
<li>At least one Linux Machine.</li>
<li>For Windows builds, an additional Windows machine is required.</li>
<li>All machines must be in a local network, that also contains the machine that runs the setup script.</li>
<li>Linux machines must be accessible via OpenSSH from the script-runner.</li>
<li>Linux machines must have docker installed.</li>
<li>Windows machines must be accessible via "Bitvise SSH Server" from the script-runner.</li>
<li>Windows machines must have the <code>slave.jar</code> copied to "C:\jenkins"?</li>
<li>On windows build-slaves all tools that are required to run the CPF pipeline must be manually installed.</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000010">Todo:</a></b></dt><dd><p class="startdd">Setup infrastructure on fresh systems and complete the list. </p>
<p class="enddd">This section has overlapping content with <a class="el" href="../../d9/d9a/_c_p_f_setting_up_the_infrastructure.html">Setting up the CPF CI infrastructure</a>. We should merge them together.</p>
</dd></dl>
<h2>Setting up the infrastructure</h2>
<p>After setting up the host-machines and getting the <a class="el" href="../../db/d51/namespace_c_p_f_machines.html">CPFMachines</a> package, you are ready to set up the servers that are involved in the CPF infrastructure. If you want to use the infrastructure for multiple projects, it is recommended that you create an extra CPF-project that holds the configuration files that are needed when running the setup scripts. If you use the jenkins server for a single CPF-project you can add the configuration files to the global files if that project. In both cases you will have to add the <a class="el" href="../../db/d51/namespace_c_p_f_machines.html">CPFMachines</a> and most likely the CPFJenkinsjob package to the CPF-project that holds the configuration files.</p>
<h3>Machine configuration</h3>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000011">Todo:</a></b></dt><dd>Automatically add the content of the example config file here and manually add comments.</dd></dl>
<h3>Running the script</h3>
<p>When you added the configuration file to the project, you are ready to go. Start the setup script by running</p>
<div class="fragment"><div class="line">python -m Sources.CPFMachines.setup Sources/MyCPFMachinesConfig.json</div></div><!-- fragment --><p>in the root directory of your project. This may take some time because some of the tools required for the pipeline build need to be compiled while setting up the docker container. If everything went well the script ends with the output</p>
<div class="fragment"><div class="line">Successfully startet jenkins master, build slaves and the documentation server.</div></div><!-- fragment --><p>If you used the example config file, you should now be able to access the Jenkins web-interface under <a href="http://MyMaster:8080">http://MyMaster:8080</a> and the projects web-server under <a href="http://MyMaster:80">http://MyMaster:80</a>. However, the links to your projects will only work after running their build-jobs.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000012">Todo:</a></b></dt><dd>Change webserver file structure, that multiple project pages can be served (serachindex?) and an index.html in the base directory provides links to the single projects. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Apr 20 2018 12:12:31 for CMakeProjectFramework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
