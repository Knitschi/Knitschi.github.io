<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="shortcut icon" href="../../CPFLogo.svg">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <!--<meta name="generator" content="Doxygen 1.8.14"/> -->
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>CMakeProjectFramework: Basic Concepts</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="CMakeProjectFramework"/>
    <!---->
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../DoxygenStylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../CPFLogo.svg" style="width:65px;height:65px;" /></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMakeProjectFramework
   </div>
   <div id="projectbrief">A C++ project infrastructure.</div>
  </td>
   <!--<td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="../../search.html" method="get">
              <img id="MSearchSelect" src="../../search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('df/d2a/_c_p_f_basic_concepts.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Basic Concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This pages describes the general ideas behind the <em>CMakeProjectFramework</em>. It introduces some terms that are used throughout the documentation of this project.</p>
<h1><a class="anchor" id="Concepts"></a>
Concepts</h1>
<p>The CPF follows the following key concepts.</p>
<ul>
<li>Provide a <a class="el" href="../../df/d2a/_c_p_f_basic_concepts.html#MultiRepositoryApproach">Multi repository approach</a> approach that allows the distribution of the code base over multiple repositories.</li>
<li>Define the build infrastructure completely in text-files that can be held in a repository. This allows to quickly set up the infrastructure from a small amount of data. The repository also provides the change history for the system.</li>
<li>Hide all CMake features behind a smaller declarative interface. While cmake offers the functionality to solve all problems that occur when setting up a C++ code-base, it is still quite some work to implement a solution. The CPF wants to take that burden from its users, while trying not to loose too much of the generality that a custom implementation would offer.</li>
<li>Keep files of three different live expectancies in three different directories. Sources, Configurations and generated files. Keeping the generated files out of the source-tree has become the norm when using CMake. This allows deleting the <em>build-tree</em> in order to guarantee a fresh system. However, in the standard CMake workflow, the generated files also contain the manually defined project configuration within the <code>CMakeCache.txt</code> file. For complex projects, defining a configuration may take some time and deleting it together with the generated files is undesirable. The <em>CPF</em> therefore puts the configuration information in a directory that is parallel to the <em>build-* and *source-tree</em>. It also allows defining multiple configurations at the same time.</li>
<li>Let the build system handle parallelism and up-to-date checks. The <em>CPF</em> takes advantage of <em>CMake's</em> custom target mechanism. This way the advanced tasks like test-runs, code-analysis or documentation generation may be run in parallel and are only re-run when they are outdated.</li>
<li>Separate the CI-code from the production code by putting it into the CI-project repository. Read more in <a class="el" href="../../df/d2a/_c_p_f_basic_concepts.html#CIProjectAndPackageProjects">CI project vs. package projects</a>.</li>
</ul>
<h2><a class="anchor" id="CIProjectAndPackageProjects"></a>
CI project vs. package projects</h2>
<p>In a CPF project, the code that implements the CI-job is separated from the <em>payload</em> code. The <em>payload</em> code can be split up into multiple packages.</p>
<p>To achieve this, a CPF project has two CMake project levels. The CI project is created in the root <code>CMakeLists.txt</code> file. It provides the interface for the CI-job and the developers to build a set of packages and defines which configurations are build by the CI-system. The project repository can also contain some higher level documentation that does not really belong to a single package, but rather the group of packages that is <em>owned</em> by the CI project.</p>
<p>In the <em>Sources</em> subdirectory we have the package directories that contain the <code>CMakeLists.txt</code> files that define the package projects. Each package creates one main binary that is supposed to be used by consumers. This can be a library or an executable. The package can also contain other arbitrary files like test-code, image resources, documentation and everything else that belongs to that piece of functionality.</p>
<h2><a class="anchor" id="MultiRepositoryApproach"></a>
Multi repository approach</h2>
<p>For small code bases it is practical to keep all files in a single repository. This avoids version conflicts and keeps the project nice and simple. This means however, that a change in a a lower lever library must always be pulled through* for all components that use the library. A change in one <code></code>.cpp file will always trigger the build-job for the <em>whole world</em>. One can imagine that this does not scale for a growing code-base.</p>
<p>The CPF therefore supports splitting up the code-base into multiple repositories and multiple build-jobs. A CPF project can be started with the simple single repository and single build-job approach and later be split up in multiple repositories and multiple build-jobs. One should be aware though, that this introduces a noticeable increase in complexity. The <em>git work</em> will increase and and version conflicts become possible.</p>
<p>Each CI-project repository defines a CI-build-job for multiple packages, and each package can have its own repository which is recommended for packages that are consumed by multiple CI-projects.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000011">Todo:</a></b></dt><dd>Add a nice diagram of a monolithic project vs. a distributed one.</dd></dl>
<h2><a class="anchor" id="PackageOwnership"></a>
Package ownership</h2>
<p>A package can be owned by a CI project or be an external package. If a package is owned by a CI project it means, that this CI project is responsible for running the automated tests of the package and defining the officially supported build configurations of that the package. When using the CPFMachines CI-job, it will also be the entity that marks successful builds of owned packages with version tags. An owned package can either be included in the CI projects git repository, or it can be a git submodule with its own repository. If it uses a git submodule it is called a <em>loose owned package</em>. In this case it's version number can advance independently of the CI-repository. Packages that are intended to be used in other projects, should be <em>loose</em> packages with their own repository to allow other projects to include the package as a git submodule. <em>Loose</em> packages lead to more and more complex <em>git work</em>, meaning that more git operations will be necessary in the day to day work. If packages are executables or not used in other projects, it is therefore recommended to make them <em>fixed</em> packages and check them directly into the CI repository.</p>
<p>External packages are always git submodules. The CI project's build-pipeline will not run the tests for these packages and exclude them when generating the documentation. An external project should have another CI project that owns that package. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath-cpf"><!-- id is needed for treeview function! -->
  <ul>
    <!-- -->
    <li class="footer">Created with Doxygen 1.8.14</li>
  </ul>
</div>
</body>
</html>
