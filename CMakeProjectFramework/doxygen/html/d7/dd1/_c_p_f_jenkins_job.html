<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="shortcut icon" href="../../CPFLogo.svg">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <!--<meta name="generator" content="Doxygen 1.8.14"/> -->
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>CMakeProjectFramework: The jenkins build-job</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="CMakeProjectFramework"/>
    <!---->
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../DoxygenStylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../CPFLogo.svg" style="width:65px;height:65px;" /></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMakeProjectFramework
   </div>
   <div id="projectbrief">A C++ project infrastructure.</div>
  </td>
   <!--<td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="../../search.html" method="get">
              <img id="MSearchSelect" src="../../search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d7/dd1/_c_p_f_jenkins_job.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">The jenkins build-job </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="CPFJobParameterSection"></a>
Running the CPF Jenkins job</h1>
<p>The jenkins job that is created by this package is a parameterized job. The parameters can be used to execute multiple tasks on a CPF CI-project when the job is started via the Jenkins web-interface.</p>
<h2><a class="anchor" id="CPFJobSubsection1"></a>
Integrating new commits</h2>
<p>In this mode, the job verifies the commits made to an integration branch by building the pipeline in all configurations, merge the commits to a main branch and add a new internal-version tag to mark the commit as a successful build. The project web-page will be updated with the latest version of the generated documentation. This mode is the most common use case, which should be triggered automatically when pushing commits to an integration branch of the build repository or one of the package repositories.</p>
<p>To do an integration job following parameters must be set:</p>
<ul>
<li><b>branchOrTag:</b> origin/&lt;name&gt;-int-&lt;MainBranch&gt;</li>
<li><b>task:</b> integration</li>
<li><b>package:</b> If a package was changed, this must be set to the package name. Note that this must be a package that has its versioning handled by this build project.</li>
</ul>
<p>all other can be left at their defaults.</p>
<h2><a class="anchor" id="CPFJobSubsection2"></a>
Tagging a commit with a release version</h2>
<p>In this mode the job will overwrite an existing internal version tag with a release version and rebuild the tagged commit to create build artifacts with the new version. In this case you need to specify which part/digit of the version number should be incremented. The less significant digits are reset to zero. This will also update the projects web-page.</p>
<p>To create a release tag, the following parameters must be set:</p>
<ul>
<li><b>branchOrTag:</b> existing internal version-tag</li>
<li><b>task:</b> one of incrementMajor, incrementMinor, incrementPatch</li>
</ul>
<p>all other can be left at their defaults.</p>
<h2><a class="anchor" id="CPFJobSubsection3"></a>
Rebuild an existing commit</h2>
<p>Sometimes it is necessary to rebuild an already integrated commit in order to recreate build artifacts. In this mode, the job will not touch the version tags are changed. This will also update the projects web-page. When none of the jobs default parameters are changed, it executes this task for the master branch.</p>
<p>To rebuild an existing commit the following parameters must be set:</p>
<ul>
<li><b>branchOrTag:</b> &lt;version-tag&gt;</li>
</ul>
<p>all other can be left at their defaults.</p>
<h2><a class="anchor" id="CPFJobSubsection4"></a>
Testing or debugging the job itself</h2>
<p>When working on the CMakeProjectFramework itself, it is sometimes useful to speed up the build-job by running it with a reduced workload and without modifying the repository. Reducing the workload can be achieved by limiting the build to a special configuration and/or a special target.</p>
<p>In this case the following parameters must be set:</p>
<ul>
<li><b>branchOrTag:</b> origin/&lt;someBranch&gt; (this should be the branch you work on)</li>
<li><b>task:</b> rebuild</li>
<li><b>package:</b> The package you work on.</li>
<li><b>cpfConfiguration:</b> The configuration you are interested in.</li>
<li><b>target:</b> The target that is build.</li>
</ul>
<h2><a class="anchor" id="CPFJobSubsection5"></a>
Let the build-job do the code formatting.</h2>
<p>If you enabled the <a class="el" href="../../df/d03/_c_p_f_custom_targets.html#clang-format_package">clang-format_&lt;binary-target&gt;</a> target, the build-job will format all the owned packages in your project on each execution. This is triggered if the <code>Sources/</code>.clang-format file exits.</p>
<h1><a class="anchor" id="CPFJobDocumentationAssembly"></a>
Documentation publishing</h1>
<p>After a successful build, the jenkins job accumulates the html output from all configurations that are specified in the <code>cpfCIBuildConfigurations.json</code> file. This is done, because not all pipeline steps are available for all configurations. For example the OpenCppCoverage report can only be generated on Windows and would miss if only the html-pages generated by a Linux configuration were published. The Doxygen output can be created by all configurations and only one will be used in the accumulated html output. The build-job will take the output from the last configuration in <code>cpfCIBuildConfigurations.json</code> file that generates it. This may be important when you want to use the output of a special configuration. Note that the configuration can influence the actual content of the documentation, an example is the dependency graph in which the node shapes are different for shared and static libraries.</p>
<p>After accumulation the content of the html directory is copied to the web-server that belongs build project and can be accessed via that server. In case you want to use a custom jenkins-job for publishing the webpage, the CPF-job creates a build-artifact that contains the complete html directory. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath-cpf"><!-- id is needed for treeview function! -->
  <ul>
    <!-- -->
    <li class="footer">Created with Doxygen 1.8.14</li>
  </ul>
</div>
</body>
</html>
